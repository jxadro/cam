{
  "service": {
    "version": "1.0.0.2",
    "specVersion": "v3",
    "catalog_metadata": {
      "name": "LAMP",
      "description": "",
      "image": "serviceicon_1.svg",
      "category": "Hybrid Cloud",
      "bullets": [],
      "providerDisplayName": "IBM",
      "longDescription": "",
      "documentationUrl": "",
      "supportUrl": "",
      "bindable": false,
      "updatable": "",
      "systemTags": true
    },
    "tags": [
      {
        "name": "Name",
        "label": "Name",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Name provided for the service instance by the end user at time of request",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.name}"
      },
      {
        "name": "request_group",
        "label": "request_group",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "The current context group id of the current user that requested the provisioning of the template. This is important because a user may be part of more than one group and this identifies the context of which group the user made the request.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.group}"
      },
      {
        "name": "request_user",
        "label": "request_user",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "The user id of the current user that requested the provisioning of the template.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.owner}"
      },
      {
        "name": "service_name",
        "label": "service_name",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Name provided for the service instance by the end user at time of request",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.name}"
      },
      {
        "name": "service_identifier",
        "label": "service_identifier",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Unique identifer generated by ICAM which is mapped to the service instance of the template provisioned.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.service_instance_id}"
      }
    ],
    "upgrade_from": [],
    "downgrade_to": [],
    "actions": [
      {
        "type": "provision",
        "name": "Provision",
        "description": "Default action for deployment of service",
        "input_parameters": [
          {
            "name": "instance_name",
            "label": "VM Instance name",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "isDynamic": false,
            "editable": true,
            "passbyname": false,
            "dynamicDetails": {}
          },
          {
            "name": "env",
            "label": "",
            "customtype": "string",
            "type": "string",
            "immutable": true,
            "hidden": true,
            "required": false,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "editable": false,
            "default": "changeme",
            "passbyname": false,
            "dynamicDetails": {}
          },
          {
            "name": "connection",
            "label": "IBM Connection",
            "customtype": "connection",
            "type": "connection",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "editable": true,
            "default": "Ordax_IBM",
            "provider": "IBM"
          },
          {
            "customtype": "sharedparameter",
            "type": "sharedparameter",
            "immutable": true,
            "hidden": true,
            "required": true,
            "secured": false,
            "description": "",
            "default": "IBM_VPC_Development",
            "datatype": "ibm_vpc_info",
            "name": "ibm_vpc_info",
            "label": "VPC Information",
            "editable": true,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          }
        ],
        "flow": {
          "conditions": [
            {
              "decision": {
                "title": "Check for approval",
                "options": [
                  {
                    "case": "pro",
                    "sequence": {
                      "0": "imapprov44878490"
                    }
                  },
                  {
                    "case": "dev",
                    "sequence": {
                      "0": "ibmvpc2i8c5bc861",
                      "1": "inventorb8438570",
                      "2": "lamp136227098743"
                    }
                  }
                ],
                "id": "decision29b38b89",
                "editable": true,
                "isErrorFlow": false,
                "mapped_parameter": "${input_parameters.env}"
              }
            },
            {
              "decision": {
                "title": "approved",
                "options": [
                  {
                    "case": "approved",
                    "sequence": {
                      "0": "ibmvpc2i10d5f4cb",
                      "1": "inventore2c0ae94",
                      "2": "lamp4373d4bc5f82"
                    }
                  }
                ],
                "id": "decisionf86a929f",
                "editable": true,
                "mapped_parameter": "${templates.imapprov44878490.output.approval_status}",
                "isErrorFlow": false
              }
            }
          ],
          "templates": [
            {
              "IM Approval": {
                "title": "IM Approval_f7c1f0",
                "template_name": "IM Approval",
                "version": "main",
                "id": "imapprov44878490",
                "template_type": "Terraform",
                "template_content_type": "Other",
                "template_provider": "Other",
                "instance_name": "IM Approval",
                "template_data_objects": {},
                "template_params": {
                  "catalogid": "1",
                  "host": "manageiq2.mcmpoc.com",
                  "itemid": "1"
                },
                "outputs": [
                  "approval_status"
                ],
                "editable": true,
                "cloud_connection_names": [
                  {
                    "provider": "Other",
                    "connection_name": "Other"
                  }
                ],
                "provider_engine_version": "0.12.21",
                "cloud_connection_name": "Other"
              }
            },
            {
              "IBM VPC2 Instance": {
                "title": "IBM VPC2 Instance Dev",
                "template_name": "IBM VPC2 Instance",
                "version": "main",
                "id": "ibmvpc2i8c5bc861",
                "template_type": "Terraform",
                "template_content_type": "IBM",
                "template_provider": "IBM",
                "instance_name": "Create IBM VM Dev",
                "template_data_objects": {},
                "template_params": {
                  "instance_name": "${input_parameters.instance_name}",
                  "region": "${datatypes.ibm_vpc_info.region}",
                  "resource_group": "${datatypes.ibm_vpc_info.resource_group}",
                  "security_group": "${datatypes.ibm_vpc_info.security_group}",
                  "size": "${input_parameters.env}",
                  "ssh_key_name": "${datatypes.ibm_vpc_info.ssh_key_name}",
                  "subnet": "${datatypes.ibm_vpc_info.subnet}",
                  "vpc": "${datatypes.ibm_vpc_info.vpc}",
                  "zone": "${datatypes.ibm_vpc_info.zone}"
                },
                "outputs": [
                  "ip"
                ],
                "editable": true,
                "cloud_connection_names": [
                  {
                    "provider": "IBM",
                    "connection_name": "${input_parameters.connection}"
                  }
                ],
                "provider_engine_version": "0.12.21",
                "isErrorFlow": false,
                "cloud_connection_name": "Ordax_IBM"
              }
            },
            {
              "Inventory": {
                "title": "LAMP Inventory Dev",
                "template_name": "Inventory",
                "version": "1.0",
                "id": "inventorb8438570",
                "template_type": "ANSIBLE",
                "template_content_type": "ANSIBLE",
                "template_provider": "ANSIBLE",
                "instance_name": "Inventory Pro",
                "cloud_connection_name": "LocalTower",
                "template_data_objects": {},
                "template_params": {
                  "organizationName": "Default",
                  "inventoryName": "LAMP Inventory",
                  "extraVars": {},
                  "hostgroup": {
                    "None": "${templates.ibmvpc2i8c5bc861.output.ip}"
                  }
                },
                "outputs": [
                  "inventory_name"
                ],
                "editable": true,
                "provider_engine_version": "1.0",
                "isErrorFlow": false
              }
            },
            {
              "LAMP": {
                "title": "LAMP Job Dev",
                "template_name": "LAMP",
                "version": "1.0",
                "id": "lamp136227098743",
                "template_type": "ANSIBLE",
                "template_content_type": "ANSIBLE",
                "template_provider": "ANSIBLE",
                "instance_name": "LAMP job Dev",
                "cloud_connection_name": "LocalTower",
                "template_data_objects": {},
                "template_params": {
                  "inventory_name": "${templates.inventorb8438570.output.inventory_name}",
                  "credential_name": "LAMP",
                  "extra_variables": {}
                },
                "outputs": [
                  "job_status"
                ],
                "editable": true,
                "isErrorFlow": false
              }
            },
            {
              "IBM VPC2 Instance": {
                "title": "IBM VPC2 Instance",
                "template_name": "IBM VPC2 Instance",
                "version": "main",
                "id": "ibmvpc2i10d5f4cb",
                "template_type": "Terraform",
                "template_content_type": "IBM",
                "template_provider": "IBM",
                "instance_name": "Create IBM VM Pro",
                "template_data_objects": {},
                "template_params": {
                  "instance_name": "${input_parameters.instance_name}",
                  "region": "${datatypes.ibm_vpc_info.region}",
                  "resource_group": "${datatypes.ibm_vpc_info.resource_group}",
                  "security_group": "${datatypes.ibm_vpc_info.security_group}",
                  "size": "${input_parameters.env}",
                  "ssh_key_name": "${datatypes.ibm_vpc_info.ssh_key_name}",
                  "subnet": "${datatypes.ibm_vpc_info.subnet}",
                  "vpc": "${datatypes.ibm_vpc_info.vpc}",
                  "zone": "${datatypes.ibm_vpc_info.zone}"
                },
                "outputs": [
                  "ip"
                ],
                "editable": true,
                "cloud_connection_names": [
                  {
                    "provider": "IBM",
                    "connection_name": "${input_parameters.connection}"
                  }
                ],
                "provider_engine_version": "0.12.21",
                "isErrorFlow": false,
                "cloud_connection_name": "Ordax_IBM"
              }
            },
            {
              "Inventory": {
                "title": "LAMP Inventory",
                "template_name": "Inventory",
                "version": "1.0",
                "id": "inventore2c0ae94",
                "template_type": "ANSIBLE",
                "template_content_type": "ANSIBLE",
                "template_provider": "ANSIBLE",
                "instance_name": "Inventory Pro",
                "cloud_connection_name": "LocalTower",
                "template_data_objects": {},
                "template_params": {
                  "organizationName": "Default",
                  "inventoryName": "LAMP Inventory",
                  "extraVars": {},
                  "hostgroup": {
                    "None": "${templates.ibmvpc2i10d5f4cb.output.ip}"
                  }
                },
                "outputs": [
                  "inventory_name"
                ],
                "editable": true,
                "provider_engine_version": "1.0",
                "isErrorFlow": false
              }
            },
            {
              "LAMP": {
                "title": "LAMP Job",
                "template_name": "LAMP",
                "version": "1.0",
                "id": "lamp4373d4bc5f82",
                "template_type": "ANSIBLE",
                "template_content_type": "ANSIBLE",
                "template_provider": "ANSIBLE",
                "instance_name": "LAMP job PRO",
                "cloud_connection_name": "LocalTower",
                "template_data_objects": {},
                "template_params": {
                  "inventory_name": "${templates.inventore2c0ae94.output.inventory_name}",
                  "credential_name": "LAMP",
                  "extra_variables": {}
                },
                "outputs": [
                  "job_status"
                ],
                "editable": true,
                "isErrorFlow": false
              }
            }
          ],
          "resthooks": [],
          "notifications": [],
          "sequence": {
            "0": "decision29b38b89",
            "1": "decisionf86a929f"
          },
          "error_sequence": {}
        },
        "output_parameters": [],
        "datatypes": [
          {
            "id": "ibm_vpc_info",
            "label": "ordax_vpc_info",
            "description": "",
            "datatype": "ibm_vpc_info",
            "default": "${input_parameters.ibm_vpc_info}",
            "immutable": false
          }
        ]
      }
    ],
    "plans": [
      {
        "name": "Development",
        "description": "Deploy Development size",
        "actions": [],
        "plan_parameters": [
          {
            "name": "env",
            "label": "",
            "customtype": "string",
            "type": "string",
            "immutable": true,
            "hidden": true,
            "required": false,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "editable": false,
            "default": "dev"
          },
          {
            "name": "connection",
            "label": "IBM Connection",
            "customtype": "connection",
            "type": "connection",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "editable": true,
            "default": "Ordax_IBM",
            "provider": "IBM"
          },
          {
            "customtype": "sharedparameter",
            "type": "sharedparameter",
            "immutable": true,
            "hidden": true,
            "required": true,
            "secured": false,
            "description": "",
            "default": "IBM_VPC_Development",
            "datatype": "ibm_vpc_info",
            "name": "ibm_vpc_info",
            "label": "VPC Information",
            "editable": true,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "instance_name",
            "label": "VM Instance name",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "isDynamic": false,
            "editable": true,
            "passbyname": false,
            "dynamicDetails": {}
          }
        ]
      },
      {
        "name": "Production",
        "description": "Deploy Production Size",
        "plan_parameters": [
          {
            "name": "env",
            "label": "",
            "customtype": "string",
            "type": "string",
            "immutable": true,
            "hidden": true,
            "required": false,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "editable": false,
            "default": "pro"
          },
          {
            "name": "ibm_vpc_info",
            "label": "VPC Information",
            "customtype": "sharedparameter",
            "type": "sharedparameter",
            "immutable": true,
            "hidden": true,
            "required": true,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "editable": false,
            "default": "IBM_VPC_Production",
            "datatype": "ibm_vpc_info"
          },
          {
            "name": "connection",
            "label": "IBM Connection",
            "customtype": "connection",
            "type": "connection",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "editable": true,
            "default": "Ordax_IBM",
            "provider": "IBM"
          },
          {
            "name": "instance_name",
            "label": "VM Instance name",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "isDynamic": false,
            "editable": true,
            "passbyname": false,
            "dynamicDetails": {}
          }
        ]
      }
    ]
  }
}